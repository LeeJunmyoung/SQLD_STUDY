# 조인 수행 원리
1. 조인이란 두개 이상의 테이블을 하나의 집합으로 만드는 연산이다.
2. SQL문의 from절에 두개 이상의 테이블 혹은 집합이 존재할 경우 조인이 수행된다.
3. 조인은 3개 이상의 테이블을 조인한다고 하더라도 특정 시점에 2개의 테이블 단위로 조인된다.
4. A,B,C 집합을 조인한다면 A,B 조인 후 해당 결과 집합을 C와 조인 하는 방식이다.
5. 각각의 조인 단계에서는 서로 다른 조인 기법(방법)이 사용될 수 있다.
6. 즉 A,B 조인 시에는 NL조인을 수행하고 A,B조인의 결과와 C를 조인 시에는 해시 조인이 수행될 수 있다.

## NL조인(NESTED LOOPS)
* RANDOM ACCESS 위주(인덱스 구성이 완벽해도 대량 데이터 조인시 불리)
* 한 레코드 씩 순차 진행(부분 범위 처리를 유도해야 효율적 수행)
* DRIVING 테이블 처리 범위에 의해 전체 성능이 결정됨
* 인덱스 유무, 인덱스 구성에 크게 영향 받음
* 소량의 데이터를 처리하거나 부분범위처리가 가능한 OLTP환경에 적합

## SORT MERGE 조인
* 실시간 인덱스 생성: 양쪽 집합을 정렬한 다음에는 NL조인과 같은 오퍼레이션
* 인덱스 유무에 영향을 받지 않음 : 미리 정렬된 인덱스가 있으면 좀 더 빠르게 수행할 수는 있음
* 양쪽 집합을 개별적으로 읽고 나서 조인 : 조인 컬럼에 인덱스가 없는 상황에서 두 테이블을 독립적으로 읽어 조인 대상 집합을 줄일 수 있을 때 아주 유리
* 스캔(Scan) 위주의 액세스 방식 : 양쪽 소스 집합에서 정렬 대상 레코드를 찾는 직업은 인덱스를 이용 Random Access 방식으로 처리 될 수 있음 

## HASH 조인
* 대량의 데이터 처리가 필요하고 쿼리 수행 시간이 오래 걸리는 대용량 테이블을 조인 할 때(배치 프로그램, DW, OLAP성 쿼리) 사용
* NL조인처럼 Random Access 부하 없음
* Sort merge 조인 처럼 정렬 부하 없음
* 해시 테이블을 생성하는 비용에 따라서 Build Input 이(Hash Area에 담을 수 있을 정도로 충분히) 작을 때라야 효과적

## 조인 순서의 중요성
항목|설명|비고
---|---|---
First Table|- 두개의 Table을 조인 할 경우 먼저 처리되는 테이블을 의미한다.<br>- Where 절에 상수/바인드 변수 조건이 존재하는 것이 성능상 유리하다.|Outer Table<br>Driving Table<br>Build Input
Second Table|- 두개의 테이블을 조인 할 경우 뒤에 처리되는 테이블을 의미한다.<br>- First Table로 부터 입력 값을 받아서 처리하게 된다.<br>- 조인 조건의 여부 및 성질이 조인 조건이 성능에 영향을 미친다<br>- 조인 조건 및 상수/바인드 변수 조건에 인덱스 존재 여부가 매우 중요하다(NL Join에 경우)|Inner Table<br>Driven Table<br>Probe Input
최적화된 Join Order|- First Table이 Second Table에 비해서 작은 집합 이어야 성능상 유리하다.(NL, Hash Join에 경우)|-

