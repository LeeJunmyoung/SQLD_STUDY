# 데이터 베이스 구조와 성능

## 슈퍼타입 / 서브 타입
1. 업무를 구성하는 데이터의 특징을 분석하여 공통점/차이점을 고려하여 효과적으로 표현할 수 있음.
2. 공통의 부분을 슈퍼타입 엔티티로 모델링하고 공통으로 부터 상속받아 다른 엔티티와 차이가 있는 속성에 대해서는 별도의 서브 타입 엔티티로 구분
3. 업무의 모습을 정확하게 표현하면서 물리적인 데이터 모델로 변환을 할 때 선택의 폭을 넑힐 수 있는 장점이 있음.

|방법|설명|
---|---
슈퍼타입(Single 타입, All in One 타입) 기준 | 슈퍼 / 서브 타입을 모델을 하나의 테이블로 변환한 것이다.
서브타입(Plus 타입, Super+Sub타입) 기준 | 슈퍼 / 서브 타입을 서브타입 테이블로 변환한 것이다. <br> 도출된 각각의 서브타입에는 변환전 슈퍼 엔터티에 있던 컬럼들을 공통적으로 가지고 있다.
개별타입(OneToOne타입, 1:1타입)기준 | 슈퍼 / 서브 타입을 슈퍼, 서브타입 각각 개별 테이블로 변환한 것이다.<br> 슈퍼 테이블, 서브 테이블 모두 생성한 것이다.

## 슈퍼/서브타입 데이터 모델의 변환의 중요성
1. 트랜잭션은 항상 슈퍼타입 기준으로 처리한다면 테이블은 개별타입으로 유지되어 UNION연산에 의해 성능이 저하 될 수 있다. (슈퍼타입 기준으로 테이블을 구성하는 것이 유리한 경우이다.)
2. 트랜잭션은 항상 서브타입을 기준으로 처리한다면 개별타입 혹은 슈퍼타입으로 되어있는 경우 성능이 저하 되는 경우가 있다. (서브타입 기준으로 테이블을 구성하는 것이 유리한 경우이다.)
3. 트랜잭션은 항상 개별타입 기준으로 처리한다면 테이블은 슈퍼타입으로 되어 있어 불필요하게 많은 양의 데이터가 집약되어 있어 성능이 저하되는 경우가 있다. (개별타입으로 테이블을 구성하는 것이 유리한 경우이다.)

## 슈퍼/서브 타입 데이터 모델 변환타입 비교
|구분|슈퍼타입|서브타입|개별타입|
---|---|---|---
특징|하나의테이블|각각의 서브타입 테이블|슈퍼 서브 각각의 테이블
확장성|나쁨|보통|좋음
조인성능|우수함|나쁨|나쁨
I/O성능|나쁨|좋음|좋음
관리용이성|좋은|좋지 않음|좋지 않음
트랜잭션 유형에 다른 선택방법|전체를 일괄적으로 처리하는 경우 선택|각각의 서브타입을 기준으로 처리하는 경우 선택|각각의 슈퍼 서브 타입을 기준으로 처리하는 경우 선택

## PK/FK 컬럼 순서와 성능

### 순서와 성능 개요
1. 테이블에 발생되는 트랜잭션 조회 패턴에 따라 PK/FK 컬럼의 순서를 조쟁하애 함.
2. 성능저하 현상이 많은 부분이 PK가 여러 개의 속성으로 구성된 복합식별자 일 때 PK순서에 대해 별로 고려하지 않고 데이터 모델링을 한 경우에 해당
3. 물리적인 데이터 모델링 단계에서는 스스로 생성된 PK순서 이외에 다른 엔티티로 부터 상속받아 발생되는 PK순서까지 항상 주의하여 표시

### PK가 복합키일 경우 컬럼 순서가 성능에 영향을 미치는 이유
1. 인덱스 선두 컬럼에 대한 조건이 들어와야 한다.(가능한한 '=' 조건으로)
2. 인덱스 선두 컬럼에 대한 조건이 들어오지 않을 경우 인덱스 전체를 읽거나 테이블 전체를 읽게 됨.

